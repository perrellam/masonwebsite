if (self.CavalryLogger) { CavalryLogger.start_js(["zAG1x"]); }

__d('BlueBarFixedBehaviorController',['Arbiter','Bootloader'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={init:function h(i){if(!('getBoundingClientRect' in i))return;var j=void 0,k=document.documentElement;function l(){var m=i.getBoundingClientRect(),n=m.top,o=Math.round(n)-k.clientTop<=0;if(j!==o){j=o;c('Arbiter').inform('bluebarFixedBehaviorController/isfixed',j,c('Arbiter').BEHAVIOR_STATE);}}l();c('Bootloader').loadModules(["Event"],function(m){m.listen(window,'scroll',l);},'BlueBarFixedBehaviorController');}};}),null);
__d('UFIReactionsBlingTokensDirect.react',['cx','fbt','React','UFIReactionIconImpl.react','UFIReactionTypes','UFIStoryAction','joinClasses','sortReactionTypes'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').Component,m=c('React').PropTypes,n=300;j=babelHelpers.inherits(o,l);k=j&&j.prototype;function o(p,q){k.constructor.call(this,p,q);this.renderToken=function(r,s){var t=this.props.feedback,u=i._("{reaction_type} ({reduced_count})",[i.param('reaction_type',c('UFIReactionTypes').reactions[r].display_name),i.param('reduced_count',t.reactioncountmap[r].reduced)]);if(!this.props.showCounts)u=c('UFIReactionTypes').reactions[r].display_name;return (c('React').createElement('a',{'aria-label':u,'data-hover':'tooltip','data-tooltip-content':u,className:"_3emk"+(this.state.selectedReaction===r?' '+"_4wf_":''),key:'reactionType-'+r,onClick:this.onTokenClick.bind(this,r),ref:s,role:'button',tabIndex:0},c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_4-op",reaction:r}),c('React').createElement('span',{className:"_3chu"},t.reactioncountmap[r].reduced)));}.bind(this);this.state={selectedReaction:null,animateSelected:false,reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap)};}o.prototype.componentWillReceiveProps=function(p){this.setState({reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap)});};o.prototype.getReactionTypes=function(p){var q=c('sortReactionTypes')(p,false).filter(function(r){return c('UFIReactionTypes').reactions[r]&&p[r]&&p[r]['default'];});q=q.slice(0,3);return q;};o.prototype.onTokenClick=function(p,event){var q=this.props,r=q.feedback,s=q.contextArgs;if(!s||!r.supportedreactions||r.supportedreactions.indexOf(p)<0)return;var t=r.viewerreaction===p;this.setState({selectedReaction:p,animateSelected:!t});if(t)p=c('UFIReactionTypes').NONE;var u=c('UFIStoryAction').changeReaction(s,p,event.target);setTimeout(function(){this.context.dispatch(u);this.setState({selectedReaction:null,animateSelected:false});}.bind(this),n);};o.prototype.render=function(){var p=this.state,q=p.selectedReaction,r=p.animateSelected,s=null;if(q&&r){var t=this.state.reactionTypes.indexOf(q);s=c('React').createElement(c('UFIReactionIconImpl.react'),{className:c('joinClasses')("_4-op _4wg0",'token'+t),reaction:q});}return (c('React').createElement('div',{className:c('joinClasses')("_3t53 _4wg1",this.props.className)},s,c('React').createElement('span',{'aria-label':i._("See who reacted to this"),className:"_3t54",ref:'tokens',role:'toolbar'},this.state.reactionTypes.map(this.renderToken,this)),this.props.children));};o.defaultProps={className:null};o.contextTypes={dispatch:m.func};f.exports=o;}),null);